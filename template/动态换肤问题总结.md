## 动态换肤

#### 换肤遗留关键问题汇总

 1. 执行 theme-build 之后，index.html 文件生成有问题，导致此问题的原因未知，需查看 "vue-cli-plugin-theme-build" （gitlab 上海机器上） 组件源码，查找具体原因。

 2. 文件打包后，index.html 文件下link很多css文件，这个时候要替换某个单独的 css 文件就有问题了，所以要把所有的 css 文件打包成一个。

#### 注意事项

 1. 开发模式下，只能通过 postcss.config.js 文件下的默认 path 来修改主题，目前开发模式不能动态切换主题

 2. 每增加一个主题文件，需要在 styles -> theme 下增加相应的主题文件夹，同时需要在 theme.css-config.js 文件下添加相应的配置信息

#### 其他换肤方案

 1. 通过动态替换 CSS custom properties (variables), 达到动态换肤的结果，兼容情况 [https://www.caniuse.com/#search=css%20variables]，如果可行，应该是最好的方案，建议调研尝试一下。

 2. 通过对要更改颜色的值的查找替换方式，例 elementUI 的官方文档换肤，[https://github.com/PanJiaChen/vue-element-admin/blob/master/src/components/ThemePicker/index.vue] 

 3. 更过参考文章 [https://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/theme.html#element-ui-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E9%A1%B5%E9%9D%A2-%E6%8D%A2%E8%82%A4%E6%96%B9%E5%BC%8F]

#### ElementUI 定制方案

**方案1:** 保持 1.0 的方案，通过 element-cover.css 强制覆盖。

- **缺点：** css 代码冗余，且需要大量的 css 代码去覆盖，还可能有考虑不全的地方
- **优点：** 不需要重复构建，开发模式下看起来比较清爽

**方案2:** 通过 elementUI 官网提供的 *命令行主题工具* 方式定制。

- **缺点：** 

 1. 多套主题要构建多次，且每次构建的过程比较繁琐，需要保存多套 element.variables.scss
 
 2. 定制后的 elementUI 主题 css 的引入在 base.css 之后，会导致样式的错乱，将其同步引入之后又会导致样式渲染延迟。具体查看 main.js 的 planA & planB。

 3. 后期 element 升级同时也需要对照变量文件去升级

- **优点：** 不需要啰里啰嗦的写大量的重复 css 代码

个人推荐方案1，更清爽，同时建议 elementUI 能够按需引入，毕竟 elementUI 的主题 css 有4万多行，能少一些是一些